#!/bin/bash

here=$(dirname "$0")
cat <<EOF
KWM_CLUSTER_NAME=$(terraform output NAME)
KWM_DOMAIN=test.com
KWM_APISERVER_PUBLIC_IP="$(terraform output CONTROLPLANE_SSH_IPS | head -n 1 | sed 's/,$//')"
KWM_APISERVER_PRIVATE_IP="$(terraform output CONTROLPLANE_PRIVATE_IPS | head -n 1 | sed 's/,$//')"
KWM_POD_CIDR=10.1.0.0/16
KWM_SERVICE_CIDR=10.10.0.0/24
KWM_KUBERNETES_SERVICE_IP=10.10.0.1
KWM_DNS_SERVICE_IP=10.10.0.2
KWM_SSH_USER=root
KWM_VERSION_ETCD=3.2.11
KWM_VERSION_KUBERNETES=1.9.0
KWM_VERSION_KUBE_DNS=1.14.7
KWM_VERSION_CNI_PLUGIN=0.6.0
KWM_VERSION_CRI_CONTAINERD=1.0.0-beta.0
KWM_VERSION_KUBE_ROUTER=0.0.20
KWM_VERSION_TRAEFIK=1.5.0-rc2
KWM_CONTROLPLANE_HOSTNAMES=$(terraform output CONTROLPLANE_HOSTNAMES | tr -d '\n')
KWM_CONTROLPLANE_SSH_IPS=$(terraform output CONTROLPLANE_SSH_IPS | tr -d '\n')
KWM_CONTROLPLANE_PRIVATE_IPS=$(terraform output CONTROLPLANE_PRIVATE_IPS | tr -d '\n')
KWM_ETCD_HOSTNAMES=$(terraform output ETCD_HOSTNAMES | tr -d '\n')
KWM_ETCD_SSH_IPS=$(terraform output ETCD_SSH_IPS | tr -d '\n')
KWM_ETCD_PRIVATE_IPS=$(terraform output ETCD_PRIVATE_IPS | tr -d '\n')
KWM_WORKER_HOSTNAMES=$(terraform output WORKER_HOSTNAMES | tr -d '\n')
KWM_WORKER_SSH_IPS=$(terraform output WORKER_SSH_IPS | tr -d '\n')
KWM_WORKER_PRIVATE_IPS=$(terraform output WORKER_PRIVATE_IPS | tr -d '\n')
EOF
