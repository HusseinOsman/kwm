$(
[[ $KWM_ROLE =~ etcd ]] &&
  files="etcd-ca.crt etcd-ca.key etcd-client.key etcd-client.crt" \
  exec="$KWM_CONNECT" \
  basePath="$KWM_CONFIG_PATH_REMOTE" \
  sourcePath="$KWM_CONFIG_PATH_LOCAL" template util tar-copy

[[ $KWM_ROLE =~ controlplane ]] &&
  files="etcd-client.crt etcd-client.key cluster-ca.crt cluster-ca.key encryption-config.yml etcd-ca.crt etcd-ca.key service-account.key service-account.pub" \
  exec="$KWM_CONNECT" \
  basePath="$KWM_CONFIG_PATH_REMOTE" \
  sourcePath="$KWM_CONFIG_PATH_LOCAL" template util tar-copy

[[ $KWM_ROLE =~ worker ]] &&
  files="cluster-ca.crt cluster-ca.key" \
  exec="$KWM_CONNECT" \
  basePath="$KWM_CONFIG_PATH_REMOTE" \
  sourcePath="$KWM_CONFIG_PATH_LOCAL" template util tar-copy
)
